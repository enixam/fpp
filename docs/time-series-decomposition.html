<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Time series decomposition | Notes for “Forecasting: Principles and Practice, 3rd edition”</title>
  <meta name="description" content="“Reproducing”Forecasting: Principles and Practice, 3rd edition"" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Time series decomposition | Notes for “Forecasting: Principles and Practice, 3rd edition”" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="“Reproducing”Forecasting: Principles and Practice, 3rd edition"" />
  <meta name="github-repo" content="enixam/fpp" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Time series decomposition | Notes for “Forecasting: Principles and Practice, 3rd edition”" />
  
  <meta name="twitter:description" content="“Reproducing”Forecasting: Principles and Practice, 3rd edition"" />
  

<meta name="author" content="Qiushi Yan" />


<meta name="date" content="2020-09-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="time-series-graphics.html"/>
<link rel="next" href="time-series-features.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Notes for fpp3</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a></li>
<li class="chapter" data-level="2" data-path="time-series-graphics.html"><a href="time-series-graphics.html"><i class="fa fa-check"></i><b>2</b> Time series graphics</a><ul>
<li class="chapter" data-level="2.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#tsibble-objects"><i class="fa fa-check"></i><b>2.1</b> <code>tsibble</code> objects</a><ul>
<li class="chapter" data-level="2.1.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#manipulation"><i class="fa fa-check"></i><b>2.1.1</b> manipulation</a></li>
<li class="chapter" data-level="2.1.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#importing"><i class="fa fa-check"></i><b>2.1.2</b> importing</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#time-plots"><i class="fa fa-check"></i><b>2.2</b> Time plots</a></li>
<li class="chapter" data-level="2.3" data-path="time-series-graphics.html"><a href="time-series-graphics.html#patterns-of-time-series-trend-seasonal-and-cyclic"><i class="fa fa-check"></i><b>2.3</b> Patterns of time series: trend, seasonal and cyclic</a></li>
<li class="chapter" data-level="2.4" data-path="time-series-graphics.html"><a href="time-series-graphics.html#seasonal-plots"><i class="fa fa-check"></i><b>2.4</b> Seasonal plots</a><ul>
<li class="chapter" data-level="2.4.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#multiple-seasonal-periods-period-in-gg_season"><i class="fa fa-check"></i><b>2.4.1</b> Multiple seasonal periods: <code>period</code> in <code>gg_season()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="time-series-graphics.html"><a href="time-series-graphics.html#seasonal-subseries-plots"><i class="fa fa-check"></i><b>2.5</b> Seasonal subseries plots</a><ul>
<li class="chapter" data-level="2.5.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#example-australian-holiday-tourism"><i class="fa fa-check"></i><b>2.5.1</b> Example: Australian holiday tourism</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="time-series-graphics.html"><a href="time-series-graphics.html#visualization-between-time-series"><i class="fa fa-check"></i><b>2.6</b> Visualization between time series</a><ul>
<li class="chapter" data-level="2.6.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#scatterplot-matrices"><i class="fa fa-check"></i><b>2.6.1</b> scatterplot matrices</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="time-series-graphics.html"><a href="time-series-graphics.html#lag-plots"><i class="fa fa-check"></i><b>2.7</b> Lag plots</a><ul>
<li class="chapter" data-level="2.7.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#autocorrelation"><i class="fa fa-check"></i><b>2.7.1</b> Autocorrelation</a></li>
<li class="chapter" data-level="2.7.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#trend-and-seasonality-in-acf-plots"><i class="fa fa-check"></i><b>2.7.2</b> Trend and seasonality in ACF plots</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="time-series-graphics.html"><a href="time-series-graphics.html#calendar-plots"><i class="fa fa-check"></i><b>2.8</b> Calendar plots</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html"><i class="fa fa-check"></i><b>3</b> Time series decomposition</a><ul>
<li class="chapter" data-level="3.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#transformation-and-adjustments"><i class="fa fa-check"></i><b>3.1</b> Transformation and adjustments</a><ul>
<li class="chapter" data-level="3.1.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#calendar-adjustments"><i class="fa fa-check"></i><b>3.1.1</b> Calendar adjustments</a></li>
<li class="chapter" data-level="3.1.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#population-adjustments"><i class="fa fa-check"></i><b>3.1.2</b> Population adjustments</a></li>
<li class="chapter" data-level="3.1.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#inflation-adjustments"><i class="fa fa-check"></i><b>3.1.3</b> Inflation adjustments</a></li>
<li class="chapter" data-level="3.1.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#box-cox"><i class="fa fa-check"></i><b>3.1.4</b> Mathematical transformation (Box-Cox)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-averages"><i class="fa fa-check"></i><b>3.2</b> Moving averages</a><ul>
<li class="chapter" data-level="3.2.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-averages-of-moving-averages"><i class="fa fa-check"></i><b>3.2.1</b> Moving averages of moving averages</a></li>
<li class="chapter" data-level="3.2.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#estimating-the-trend-cycle-component-with-seasonal-data"><i class="fa fa-check"></i><b>3.2.2</b> Estimating the trend-cycle component with seasonal data</a></li>
<li class="chapter" data-level="3.2.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#weighted-moving-averages"><i class="fa fa-check"></i><b>3.2.3</b> Weighted moving averages</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#classical-decomposition"><i class="fa fa-check"></i><b>3.3</b> Classical decomposition</a></li>
<li class="chapter" data-level="3.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#x11-decomposition"><i class="fa fa-check"></i><b>3.4</b> X11 decomposition</a></li>
<li class="chapter" data-level="3.5" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#seats-decomposition"><i class="fa fa-check"></i><b>3.5</b> SEATS decomposition</a></li>
<li class="chapter" data-level="3.6" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#stl-decomposition"><i class="fa fa-check"></i><b>3.6</b> STL decomposition</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="time-series-features.html"><a href="time-series-features.html"><i class="fa fa-check"></i><b>4</b> Time series features</a><ul>
<li class="chapter" data-level="4.1" data-path="time-series-features.html"><a href="time-series-features.html#simple-statistics"><i class="fa fa-check"></i><b>4.1</b> Simple statistics</a></li>
<li class="chapter" data-level="4.2" data-path="time-series-features.html"><a href="time-series-features.html#acf-features"><i class="fa fa-check"></i><b>4.2</b> ACF features</a></li>
<li class="chapter" data-level="4.3" data-path="time-series-features.html"><a href="time-series-features.html#stl-features"><i class="fa fa-check"></i><b>4.3</b> STL features</a></li>
<li class="chapter" data-level="4.4" data-path="time-series-features.html"><a href="time-series-features.html#other-features"><i class="fa fa-check"></i><b>4.4</b> Other features</a></li>
<li class="chapter" data-level="4.5" data-path="time-series-features.html"><a href="time-series-features.html#exporing-australian-tourism-data"><i class="fa fa-check"></i><b>4.5</b> Exporing Australian tourism data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html"><i class="fa fa-check"></i><b>5</b> The forecaster’s toolbox</a><ul>
<li class="chapter" data-level="5.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#a-tidy-forecasting-workflow"><i class="fa fa-check"></i><b>5.1</b> A tidy forecasting workflow</a><ul>
<li class="chapter" data-level="5.1.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#data-preparation-tidy"><i class="fa fa-check"></i><b>5.1.1</b> Data preparation (tidy)</a></li>
<li class="chapter" data-level="5.1.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#visualize"><i class="fa fa-check"></i><b>5.1.2</b> Visualize</a></li>
<li class="chapter" data-level="5.1.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#define-a-model-specify"><i class="fa fa-check"></i><b>5.1.3</b> Define a model (specify)</a></li>
<li class="chapter" data-level="5.1.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#train-the-model-estimate"><i class="fa fa-check"></i><b>5.1.4</b> Train the model (estimate)</a></li>
<li class="chapter" data-level="5.1.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#check-model-performance-evaluate"><i class="fa fa-check"></i><b>5.1.5</b> Check model performance (evaluate)</a></li>
<li class="chapter" data-level="5.1.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#produce-forecasts-forecast"><i class="fa fa-check"></i><b>5.1.6</b> Produce forecasts (forecast)</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#some-simple-forecasting-methods"><i class="fa fa-check"></i><b>5.2</b> Some simple forecasting methods</a><ul>
<li class="chapter" data-level="5.2.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#mean-method"><i class="fa fa-check"></i><b>5.2.1</b> Mean method</a></li>
<li class="chapter" data-level="5.2.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#naive-method"><i class="fa fa-check"></i><b>5.2.2</b> Naive method</a></li>
<li class="chapter" data-level="5.2.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#seasonal-naive-method"><i class="fa fa-check"></i><b>5.2.3</b> Seasonal naive method</a></li>
<li class="chapter" data-level="5.2.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#drift-method"><i class="fa fa-check"></i><b>5.2.4</b> Drift method</a></li>
<li class="chapter" data-level="5.2.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#australian-quarterly-beer-production"><i class="fa fa-check"></i><b>5.2.5</b> Australian quarterly beer production</a></li>
<li class="chapter" data-level="5.2.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-googles-daily-closing-stock-price"><i class="fa fa-check"></i><b>5.2.6</b> Example: Google’s daily closing stock price</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#fitted-values-and-residuals"><i class="fa fa-check"></i><b>5.3</b> Fitted values and residuals</a><ul>
<li class="chapter" data-level="5.3.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#residuals"><i class="fa fa-check"></i><b>5.3.1</b> Residuals</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#residual-diagnostics"><i class="fa fa-check"></i><b>5.4</b> Residual diagnostics</a><ul>
<li class="chapter" data-level="5.4.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#white-noise"><i class="fa fa-check"></i><b>5.4.1</b> White noise</a></li>
<li class="chapter" data-level="5.4.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-forecasting-the-google-daily-closing-stock-price"><i class="fa fa-check"></i><b>5.4.2</b> Example: Forecasting the Google daily closing stock price</a></li>
<li class="chapter" data-level="5.4.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#portmanteau-tests-for-autocorrelation"><i class="fa fa-check"></i><b>5.4.3</b> Portmanteau tests for autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#predict-interval"><i class="fa fa-check"></i><b>5.5</b> Prediction intervals</a><ul>
<li class="chapter" data-level="5.5.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#one-step-prediction-intervals"><i class="fa fa-check"></i><b>5.5.1</b> One-step prediction intervals</a></li>
<li class="chapter" data-level="5.5.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#multi-step-prediction-intervals"><i class="fa fa-check"></i><b>5.5.2</b> Multi-step prediction intervals</a></li>
<li class="chapter" data-level="5.5.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#prediction-intervals-from-bootstrapped-residuals"><i class="fa fa-check"></i><b>5.5.3</b> Prediction intervals from bootstrapped residuals</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#evaluating-model-accuracy"><i class="fa fa-check"></i><b>5.6</b> Evaluating model accuracy</a><ul>
<li class="chapter" data-level="5.6.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecast-errors"><i class="fa fa-check"></i><b>5.6.1</b> Forecast errors</a></li>
<li class="chapter" data-level="5.6.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scale-dependent-errors"><i class="fa fa-check"></i><b>5.6.2</b> Scale dependent errors</a></li>
<li class="chapter" data-level="5.6.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#percentage-errors"><i class="fa fa-check"></i><b>5.6.3</b> Percentage errors</a></li>
<li class="chapter" data-level="5.6.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scaled-errors"><i class="fa fa-check"></i><b>5.6.4</b> Scaled errors</a></li>
<li class="chapter" data-level="5.6.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#examples-beer-production"><i class="fa fa-check"></i><b>5.6.5</b> Examples: beer production</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#time-series-cross-validation"><i class="fa fa-check"></i><b>5.7</b> Time series cross-validation</a><ul>
<li class="chapter" data-level="5.7.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-forecast-horizon-accuracy-with-cross-validation"><i class="fa fa-check"></i><b>5.7.1</b> Example: Forecast horizon accuracy with cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecasting-using-transformations"><i class="fa fa-check"></i><b>5.8</b> Forecasting using transformations</a><ul>
<li class="chapter" data-level="5.8.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#prediction-intervals-with-transformations"><i class="fa fa-check"></i><b>5.8.1</b> Prediction intervals with transformations</a></li>
<li class="chapter" data-level="5.8.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecasting-with-constraints"><i class="fa fa-check"></i><b>5.8.2</b> Forecasting with constraints</a></li>
<li class="chapter" data-level="5.8.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#bias-adjustments"><i class="fa fa-check"></i><b>5.8.3</b> Bias adjustments</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecasting-with-decomposition"><i class="fa fa-check"></i><b>5.9</b> Forecasting with decomposition</a><ul>
<li class="chapter" data-level="5.9.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-employment-in-the-us-retail-sector"><i class="fa fa-check"></i><b>5.9.1</b> Example: Employment in the US retail sector</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html"><i class="fa fa-check"></i><b>6</b> Judgmental forecasts</a><ul>
<li class="chapter" data-level="6.1" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#beware-of-limitations"><i class="fa fa-check"></i><b>6.1</b> Beware of limitations</a></li>
<li class="chapter" data-level="6.2" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#key-principles"><i class="fa fa-check"></i><b>6.2</b> Key principles</a></li>
<li class="chapter" data-level="6.3" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#the-delphi-method"><i class="fa fa-check"></i><b>6.3</b> The Delphi method</a><ul>
<li class="chapter" data-level="6.3.1" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#experts-and-anonymity"><i class="fa fa-check"></i><b>6.3.1</b> Experts and anonymity</a></li>
<li class="chapter" data-level="6.3.2" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#setting-the-forecasting-task-in-a-delphi"><i class="fa fa-check"></i><b>6.3.2</b> Setting the forecasting task in a Delphi</a></li>
<li class="chapter" data-level="6.3.3" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#iteration"><i class="fa fa-check"></i><b>6.3.3</b> Iteration</a></li>
<li class="chapter" data-level="6.3.4" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#final-forecasts"><i class="fa fa-check"></i><b>6.3.4</b> Final forecasts</a></li>
<li class="chapter" data-level="6.3.5" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#limitations-and-variations"><i class="fa fa-check"></i><b>6.3.5</b> Limitations and variations</a></li>
<li class="chapter" data-level="6.3.6" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#the-facilitator"><i class="fa fa-check"></i><b>6.3.6</b> The facilitator</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#forecasting-by-analogy"><i class="fa fa-check"></i><b>6.4</b> Forecasting by analogy</a></li>
<li class="chapter" data-level="6.5" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#scenario-forecasting"><i class="fa fa-check"></i><b>6.5</b> Scenario forecasting</a></li>
<li class="chapter" data-level="6.6" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#new-product-forecasting"><i class="fa fa-check"></i><b>6.6</b> New product forecasting</a><ul>
<li class="chapter" data-level="6.6.1" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#sales-force-composite"><i class="fa fa-check"></i><b>6.6.1</b> Sales force composite</a></li>
<li class="chapter" data-level="6.6.2" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#executive-opinion"><i class="fa fa-check"></i><b>6.6.2</b> Executive opinion</a></li>
<li class="chapter" data-level="6.6.3" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#customer-intentions"><i class="fa fa-check"></i><b>6.6.3</b> Customer intentions</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#judgmental-adjustments"><i class="fa fa-check"></i><b>6.7</b> Judgmental adjustments</a><ul>
<li class="chapter" data-level="6.7.1" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#use-adjustments-sparingly"><i class="fa fa-check"></i><b>6.7.1</b> Use adjustments sparingly</a></li>
<li class="chapter" data-level="6.7.2" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#apply-a-structured-approach"><i class="fa fa-check"></i><b>6.7.2</b> Apply a structured approach</a></li>
<li class="chapter" data-level="6.7.3" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#example-tourism-forecasting-committee-tfc"><i class="fa fa-check"></i><b>6.7.3</b> Example: Tourism Forecasting Committee (TFC)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html"><i class="fa fa-check"></i><b>7</b> Time series regression models</a><ul>
<li class="chapter" data-level="7.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#the-linear-model"><i class="fa fa-check"></i><b>7.1</b> The linear model</a><ul>
<li class="chapter" data-level="7.1.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#simple-linear-regression"><i class="fa fa-check"></i><b>7.1.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="7.1.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#multiple-linear-regression"><i class="fa fa-check"></i><b>7.1.2</b> Multiple linear regression</a></li>
<li class="chapter" data-level="7.1.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#assumptions"><i class="fa fa-check"></i><b>7.1.3</b> Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#least-squares-estimation"><i class="fa fa-check"></i><b>7.2</b> Least squares estimation</a><ul>
<li class="chapter" data-level="7.2.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#fitted-values"><i class="fa fa-check"></i><b>7.2.1</b> Fitted values</a></li>
<li class="chapter" data-level="7.2.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#goodness-of-fit"><i class="fa fa-check"></i><b>7.2.2</b> Goodness of fit</a></li>
<li class="chapter" data-level="7.2.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#standard-error-of-the-regression"><i class="fa fa-check"></i><b>7.2.3</b> Standard error of the regression</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#evaluating-a-regression-model"><i class="fa fa-check"></i><b>7.3</b> Evaluating a regression model</a><ul>
<li class="chapter" data-level="7.3.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#residual-plots-against-predictors"><i class="fa fa-check"></i><b>7.3.1</b> Residual plots against predictors</a></li>
<li class="chapter" data-level="7.3.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#residual-plots-against-fitted-values"><i class="fa fa-check"></i><b>7.3.2</b> Residual plots against fitted values</a></li>
<li class="chapter" data-level="7.3.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#outliers-and-influential-observations"><i class="fa fa-check"></i><b>7.3.3</b> Outliers and influential observations</a></li>
<li class="chapter" data-level="7.3.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#the-performance-package"><i class="fa fa-check"></i><b>7.3.4</b> The <code>performance</code> package</a></li>
<li class="chapter" data-level="7.3.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#spurious-regression"><i class="fa fa-check"></i><b>7.3.5</b> Spurious regression</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#some-useful-predictors"><i class="fa fa-check"></i><b>7.4</b> Some useful predictors</a><ul>
<li class="chapter" data-level="7.4.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#trend"><i class="fa fa-check"></i><b>7.4.1</b> Trend</a></li>
<li class="chapter" data-level="7.4.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#seasonal-dummy-variables"><i class="fa fa-check"></i><b>7.4.2</b> Seasonal dummy variables</a></li>
<li class="chapter" data-level="7.4.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#example-australian-quarterly-beer-production"><i class="fa fa-check"></i><b>7.4.3</b> Example: Australian quarterly beer production</a></li>
<li class="chapter" data-level="7.4.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#intervention-variables"><i class="fa fa-check"></i><b>7.4.4</b> Intervention variables</a></li>
<li class="chapter" data-level="7.4.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#trading-days"><i class="fa fa-check"></i><b>7.4.5</b> Trading days</a></li>
<li class="chapter" data-level="7.4.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#distributed-lags"><i class="fa fa-check"></i><b>7.4.6</b> Distributed lags</a></li>
<li class="chapter" data-level="7.4.7" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#easter"><i class="fa fa-check"></i><b>7.4.7</b> Easter</a></li>
<li class="chapter" data-level="7.4.8" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#fourier-sereis"><i class="fa fa-check"></i><b>7.4.8</b> Fourier sereis</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#selecting-predictors"><i class="fa fa-check"></i><b>7.5</b> Selecting predictors</a><ul>
<li class="chapter" data-level="7.5.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#adjusst-r-square"><i class="fa fa-check"></i><b>7.5.1</b> Adjusst R square</a></li>
<li class="chapter" data-level="7.5.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#cross-validation"><i class="fa fa-check"></i><b>7.5.2</b> Cross validation</a></li>
<li class="chapter" data-level="7.5.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#akaikes-information-criterion"><i class="fa fa-check"></i><b>7.5.3</b> Akaike’s Information Criterion</a></li>
<li class="chapter" data-level="7.5.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#bayesian-information-criterion"><i class="fa fa-check"></i><b>7.5.4</b> Bayesian Information Criterion</a></li>
<li class="chapter" data-level="7.5.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#which-measure-should-we-suse"><i class="fa fa-check"></i><b>7.5.5</b> Which measure should we suse</a></li>
<li class="chapter" data-level="7.5.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#example-us-consumption"><i class="fa fa-check"></i><b>7.5.6</b> Example: US consumption</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-regression"><i class="fa fa-check"></i><b>7.6</b> Forecasting with regression</a><ul>
<li class="chapter" data-level="7.6.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#ex-ante-versus-ex-post-forecasts"><i class="fa fa-check"></i><b>7.6.1</b> Ex-ante versus ex-post forecasts</a></li>
<li class="chapter" data-level="7.6.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#example-australian-quarterly-beer-production-1"><i class="fa fa-check"></i><b>7.6.2</b> Example: Australian quarterly beer production</a></li>
<li class="chapter" data-level="7.6.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#scenario-based-forecasting"><i class="fa fa-check"></i><b>7.6.3</b> Scenario based forecasting</a></li>
<li class="chapter" data-level="7.6.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#prediction-intervals"><i class="fa fa-check"></i><b>7.6.4</b> Prediction intervals</a></li>
<li class="chapter" data-level="7.6.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#building-a-predictive-regression-model"><i class="fa fa-check"></i><b>7.6.5</b> Building a predictive regression model</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#matrix-formulation"><i class="fa fa-check"></i><b>7.7</b> Matrix formulation</a></li>
<li class="chapter" data-level="7.8" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#nonlinear-regression"><i class="fa fa-check"></i><b>7.8</b> Nonlinear regression</a><ul>
<li class="chapter" data-level="7.8.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-a-nonlinear-trend"><i class="fa fa-check"></i><b>7.8.1</b> Forecasting with a nonlinear trend</a></li>
<li class="chapter" data-level="7.8.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#example-boston-marathon-winning-times"><i class="fa fa-check"></i><b>7.8.2</b> Example: Boston marathon winning times</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#correlation-causation-and-forecasting"><i class="fa fa-check"></i><b>7.9</b> Correlation, causation and forecasting</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html"><i class="fa fa-check"></i><b>8</b> Exponential smoothing</a><ul>
<li class="chapter" data-level="8.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#simple-exponential-smoothing"><i class="fa fa-check"></i><b>8.1</b> Simple exponential smoothing</a><ul>
<li class="chapter" data-level="8.1.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#weighted-average-form"><i class="fa fa-check"></i><b>8.1.1</b> Weighted average form</a></li>
<li class="chapter" data-level="8.1.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#component-form"><i class="fa fa-check"></i><b>8.1.2</b> Component form</a></li>
<li class="chapter" data-level="8.1.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#flat-forecast"><i class="fa fa-check"></i><b>8.1.3</b> Flat forecast</a></li>
<li class="chapter" data-level="8.1.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#estimation"><i class="fa fa-check"></i><b>8.1.4</b> Estimation</a></li>
<li class="chapter" data-level="8.1.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-algerian-exports"><i class="fa fa-check"></i><b>8.1.5</b> Example: Algerian exports</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#methods-with-trend-and-seasonality"><i class="fa fa-check"></i><b>8.2</b> Methods with trend and seasonality</a><ul>
<li class="chapter" data-level="8.2.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holts-linear-trend-method"><i class="fa fa-check"></i><b>8.2.1</b> Holt’s linear trend method</a></li>
<li class="chapter" data-level="8.2.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-australian-population"><i class="fa fa-check"></i><b>8.2.2</b> Example: Australian population</a></li>
<li class="chapter" data-level="8.2.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#damped-trend-methods"><i class="fa fa-check"></i><b>8.2.3</b> Damped trend methods</a></li>
<li class="chapter" data-level="8.2.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-australian-population-continued"><i class="fa fa-check"></i><b>8.2.4</b> Example: Australian Population (continued)</a></li>
<li class="chapter" data-level="8.2.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-internet-usage"><i class="fa fa-check"></i><b>8.2.5</b> Example: Internet usage</a></li>
<li class="chapter" data-level="8.2.6" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-additive-method"><i class="fa fa-check"></i><b>8.2.6</b> Holt-Winters’ additive method</a></li>
<li class="chapter" data-level="8.2.7" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-multiplicative-method"><i class="fa fa-check"></i><b>8.2.7</b> Holt-Winters’ multiplicative method</a></li>
<li class="chapter" data-level="8.2.8" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-domestic-overnight-trips-in-australia"><i class="fa fa-check"></i><b>8.2.8</b> Example: Domestic overnight trips in Australia</a></li>
<li class="chapter" data-level="8.2.9" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-damped-method"><i class="fa fa-check"></i><b>8.2.9</b> Holt-Winters’ damped method</a></li>
<li class="chapter" data-level="8.2.10" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-holt-winters-method-with-daily-data"><i class="fa fa-check"></i><b>8.2.10</b> Example: Holt-Winters method with daily data</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#a-taxonomy-of-exponential-smoothing-methods"><i class="fa fa-check"></i><b>8.3</b> A taxonomy of exponential smoothing methods</a></li>
<li class="chapter" data-level="8.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#innovations-state-space-models-for-exponential-smoothing"><i class="fa fa-check"></i><b>8.4</b> Innovations state space models for exponential smoothing</a><ul>
<li class="chapter" data-level="8.4.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#etsann-simple-exponential-smoothing-with-additive-errors"><i class="fa fa-check"></i><b>8.4.1</b> ETS(A,N,N): simple exponential smoothing with additive errors</a></li>
<li class="chapter" data-level="8.4.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#etsmnn-simple-exponential-smoothing-with-multiplicative-errors"><i class="fa fa-check"></i><b>8.4.2</b> ETS(M,N,N): simple exponential smoothing with multiplicative errors</a></li>
<li class="chapter" data-level="8.4.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#etsaan-holts-linear-method-with-additive-errors"><i class="fa fa-check"></i><b>8.4.3</b> ETS(A,A,N): Holt’s linear method with additive errors</a></li>
<li class="chapter" data-level="8.4.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#ets-man"><i class="fa fa-check"></i><b>8.4.4</b> ETS(M,A,N): Holt’s linear method with multiplicative errors</a></li>
<li class="chapter" data-level="8.4.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#other-ets-models"><i class="fa fa-check"></i><b>8.4.5</b> Other ETS models</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#estimation-and-model-selection"><i class="fa fa-check"></i><b>8.5</b> Estimation and model selection</a><ul>
<li class="chapter" data-level="8.5.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#estimating-ets-models"><i class="fa fa-check"></i><b>8.5.1</b> Estimating ETS models</a></li>
<li class="chapter" data-level="8.5.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#model-selection-criteria"><i class="fa fa-check"></i><b>8.5.2</b> Model selection criteria</a></li>
<li class="chapter" data-level="8.5.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-domestic-holiday-tourist-visitor-nights-in-australia"><i class="fa fa-check"></i><b>8.5.3</b> Example: Domestic holiday tourist visitor nights in Australia</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#forecasting-with-ets-models"><i class="fa fa-check"></i><b>8.6</b> Forecasting with ETS models</a><ul>
<li class="chapter" data-level="8.6.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-australia-gas-production"><i class="fa fa-check"></i><b>8.6.1</b> Example: Australia gas production</a></li>
<li class="chapter" data-level="8.6.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#prediction-intervals"><i class="fa fa-check"></i><b>8.6.2</b> Prediction intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html"><i class="fa fa-check"></i><b>9</b> Univariate stationary processes</a><ul>
<li class="chapter" data-level="9.1" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#stationarity"><i class="fa fa-check"></i><b>9.1</b> Stationarity</a><ul>
<li class="chapter" data-level="9.1.1" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#ch9-white-noise"><i class="fa fa-check"></i><b>9.1.1</b> White noise</a></li>
<li class="chapter" data-level="9.1.2" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#tests-for-autocorrelation-and-normality"><i class="fa fa-check"></i><b>9.1.2</b> Tests for autocorrelation and normality</a></li>
<li class="chapter" data-level="9.1.3" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#the-wold-decomposition"><i class="fa fa-check"></i><b>9.1.3</b> The Wold Decomposition</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#backshift-notation"><i class="fa fa-check"></i><b>9.2</b> Backshift notation</a></li>
<li class="chapter" data-level="9.3" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#autoregressive-models"><i class="fa fa-check"></i><b>9.3</b> Autoregressive models</a><ul>
<li class="chapter" data-level="9.3.1" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#stimulating-an-arp-process"><i class="fa fa-check"></i><b>9.3.1</b> Stimulating an AR(p) process</a></li>
<li class="chapter" data-level="9.3.2" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#decision-of-order-p"><i class="fa fa-check"></i><b>9.3.2</b> Decision of order p</a></li>
<li class="chapter" data-level="9.3.3" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#random-walk"><i class="fa fa-check"></i><b>9.3.3</b> Random walk</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#moving-average-models"><i class="fa fa-check"></i><b>9.4</b> Moving average models</a><ul>
<li class="chapter" data-level="9.4.1" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#simulating-an-maq-process"><i class="fa fa-check"></i><b>9.4.1</b> Simulating an MA(q) process</a></li>
<li class="chapter" data-level="9.4.2" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#decision-of-order-q"><i class="fa fa-check"></i><b>9.4.2</b> Decision of order q</a></li>
<li class="chapter" data-level="9.4.3" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#koyck-transformation-and-invertibility"><i class="fa fa-check"></i><b>9.4.3</b> Koyck transformation and Invertibility</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#arma-models"><i class="fa fa-check"></i><b>9.5</b> ARMA models</a><ul>
<li class="chapter" data-level="9.5.1" data-path="univariate-stationary-processes.html"><a href="univariate-stationary-processes.html#three-representations-of-an-arma-model"><i class="fa fa-check"></i><b>9.5.1</b> Three representations of an ARMA model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="arima-models.html"><a href="arima-models.html"><i class="fa fa-check"></i><b>10</b> ARIMA models</a><ul>
<li class="chapter" data-level="10.1" data-path="arima-models.html"><a href="arima-models.html#differencing"><i class="fa fa-check"></i><b>10.1</b> Differencing</a><ul>
<li class="chapter" data-level="10.1.1" data-path="arima-models.html"><a href="arima-models.html#second-order-differencing"><i class="fa fa-check"></i><b>10.1.1</b> Second-order differencing</a></li>
<li class="chapter" data-level="10.1.2" data-path="arima-models.html"><a href="arima-models.html#seasonal-differencing"><i class="fa fa-check"></i><b>10.1.2</b> Seasonal differencing</a></li>
<li class="chapter" data-level="10.1.3" data-path="arima-models.html"><a href="arima-models.html#unit-root-tests"><i class="fa fa-check"></i><b>10.1.3</b> Unit root tests</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="arima-models.html"><a href="arima-models.html#non-seasonal-arima-models"><i class="fa fa-check"></i><b>10.2</b> Non-seasonal ARIMA models</a><ul>
<li class="chapter" data-level="10.2.1" data-path="arima-models.html"><a href="arima-models.html#understanding-arima-models"><i class="fa fa-check"></i><b>10.2.1</b> Understanding ARIMA models</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="arima-models.html"><a href="arima-models.html#estimation-and-order-selection"><i class="fa fa-check"></i><b>10.3</b> Estimation and order selection</a><ul>
<li class="chapter" data-level="10.3.1" data-path="arima-models.html"><a href="arima-models.html#mle"><i class="fa fa-check"></i><b>10.3.1</b> MLE</a></li>
<li class="chapter" data-level="10.3.2" data-path="arima-models.html"><a href="arima-models.html#information-criteria"><i class="fa fa-check"></i><b>10.3.2</b> Information Criteria</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="arima-models.html"><a href="arima-models.html#the-arima-function"><i class="fa fa-check"></i><b>10.4</b> The <code>ARIMA()</code> function</a><ul>
<li class="chapter" data-level="10.4.1" data-path="arima-models.html"><a href="arima-models.html#algorithm"><i class="fa fa-check"></i><b>10.4.1</b> Algorithm</a></li>
<li class="chapter" data-level="10.4.2" data-path="arima-models.html"><a href="arima-models.html#modelling-procedure"><i class="fa fa-check"></i><b>10.4.2</b> Modelling procedure</a></li>
<li class="chapter" data-level="10.4.3" data-path="arima-models.html"><a href="arima-models.html#example-seasonally-adjusted-electrical-equipment-orders"><i class="fa fa-check"></i><b>10.4.3</b> Example: Seasonally adjusted electrical equipment orders</a></li>
<li class="chapter" data-level="10.4.4" data-path="arima-models.html"><a href="arima-models.html#plotting-the-characteristic-roots"><i class="fa fa-check"></i><b>10.4.4</b> Plotting the characteristic roots</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="arima-models.html"><a href="arima-models.html#forecasting-with-arima-models"><i class="fa fa-check"></i><b>10.5</b> Forecasting with ARIMA models</a><ul>
<li class="chapter" data-level="10.5.1" data-path="arima-models.html"><a href="arima-models.html#point-forecasts"><i class="fa fa-check"></i><b>10.5.1</b> Point forecasts</a></li>
<li class="chapter" data-level="10.5.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#prediction-intervals"><i class="fa fa-check"></i><b>10.5.2</b> Prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="arima-models.html"><a href="arima-models.html#seasonal-arima-models"><i class="fa fa-check"></i><b>10.6</b> Seasonal ARIMA models</a><ul>
<li class="chapter" data-level="10.6.1" data-path="arima-models.html"><a href="arima-models.html#acf-and-pacf"><i class="fa fa-check"></i><b>10.6.1</b> ACF and PACF</a></li>
<li class="chapter" data-level="10.6.2" data-path="arima-models.html"><a href="arima-models.html#example-european-quarterly-retail-trade"><i class="fa fa-check"></i><b>10.6.2</b> Example: European quarterly retail trade</a></li>
<li class="chapter" data-level="10.6.3" data-path="arima-models.html"><a href="arima-models.html#example-corticosteroid-drug-sales-in-australia"><i class="fa fa-check"></i><b>10.6.3</b> Example: Corticosteroid drug sales in Australia</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="arima-models.html"><a href="arima-models.html#ets-and-arima"><i class="fa fa-check"></i><b>10.7</b> ETS and ARIMA</a><ul>
<li class="chapter" data-level="10.7.1" data-path="arima-models.html"><a href="arima-models.html#example-comparing-arima-and-ets-on-non-seasonal-data"><i class="fa fa-check"></i><b>10.7.1</b> Example: Comparing <code>ARIMA()</code> and <code>ETS()</code> on non-seasonal data</a></li>
<li class="chapter" data-level="10.7.2" data-path="arima-models.html"><a href="arima-models.html#example-comparing-arima-and-ets-on-seasonal-data"><i class="fa fa-check"></i><b>10.7.2</b> Example: Comparing <code>ARIMA()</code> and <code>ETS()</code> on seasonal data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html"><i class="fa fa-check"></i><b>11</b> Dynamic regression models</a><ul>
<li class="chapter" data-level="11.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#estimation"><i class="fa fa-check"></i><b>11.1</b> Estimation</a></li>
<li class="chapter" data-level="11.2" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#regression-with-arima-errors"><i class="fa fa-check"></i><b>11.2</b> Regression with ARIMA errors</a><ul>
<li class="chapter" data-level="11.2.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-us-personal-consumption-and-income"><i class="fa fa-check"></i><b>11.2.1</b> Example: US Personal Consumption and Income</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#forecasting"><i class="fa fa-check"></i><b>11.3</b> Forecasting</a><ul>
<li class="chapter" data-level="11.3.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-forecasting-electricity-demand"><i class="fa fa-check"></i><b>11.3.1</b> Example: Forecasting electricity demand</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#deterministic-and-stochastic-trends"><i class="fa fa-check"></i><b>11.4</b> Deterministic and stochastic trends</a><ul>
<li class="chapter" data-level="11.4.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-international-visitors-to-australia"><i class="fa fa-check"></i><b>11.4.1</b> Example: International visitors to Australia</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#dynamic-harmonic-regression"><i class="fa fa-check"></i><b>11.5</b> Dynamic harmonic regression</a><ul>
<li class="chapter" data-level="11.5.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-australian-eating-out-expenditure"><i class="fa fa-check"></i><b>11.5.1</b> Example: Australian eating out expenditure</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#lagged-predictors"><i class="fa fa-check"></i><b>11.6</b> Lagged predictors</a><ul>
<li class="chapter" data-level="11.6.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-tv-advertising-and-insurance-quotations"><i class="fa fa-check"></i><b>11.6.1</b> Example: TV advertising and insurance quotations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">written with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes for “Forecasting: Principles and Practice, 3rd edition”</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="time-series-decomposition" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Time series decomposition</h1>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="time-series-decomposition.html#cb38-1"></a><span class="kw">library</span>(tsibble)</span>
<span id="cb38-2"><a href="time-series-decomposition.html#cb38-2"></a><span class="kw">library</span>(tsibbledata)</span>
<span id="cb38-3"><a href="time-series-decomposition.html#cb38-3"></a><span class="kw">library</span>(fable)</span>
<span id="cb38-4"><a href="time-series-decomposition.html#cb38-4"></a><span class="kw">library</span>(feasts)</span>
<span id="cb38-5"><a href="time-series-decomposition.html#cb38-5"></a><span class="kw">library</span>(lubridate)</span></code></pre></div>
<div id="transformation-and-adjustments" class="section level2">
<h2><span class="header-section-number">3.1</span> Transformation and adjustments</h2>
<div id="calendar-adjustments" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Calendar adjustments</h3>
<p>Some of the variation seen in seasonal data may be due to simple calendar effects. In such cases, it is usually much easier to remove the variation before doing any further analysis.</p>
<p>For example, if you are studying the total monthly sales in a retail store, there will be variation between the months simply because of the different numbers of trading days in each month, in addition to the seasonal variation across the year. It is easy to remove this variation by computing average sales per trading day in each month, rather than total sales in the month. Then we effectively remove the calendar variation. Simpler patterns are usually easier to model and lead to more accurate forecasts.</p>
</div>
<div id="population-adjustments" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Population adjustments</h3>
<p>use index per capita rather than index itself (when related to population)</p>
</div>
<div id="inflation-adjustments" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Inflation adjustments</h3>
<p>Price index such as CPI (Consumer Price Index) allows us to compare the growth or decline of industries relative to a common price value. For example, looking at aggregate “newspaper and book” retail turnover from <code>aus_retail</code>, and adjusting the data for inflation using CPI from <code>global_economy</code> allows us to understand the changes over time.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="time-series-decomposition.html#cb39-1"></a>print_retail &lt;-<span class="st"> </span>aus_retail <span class="op">%&gt;%</span></span>
<span id="cb39-2"><a href="time-series-decomposition.html#cb39-2"></a><span class="st">  </span><span class="kw">filter</span>(Industry <span class="op">==</span><span class="st"> &quot;Newspaper and book retailing&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb39-3"><a href="time-series-decomposition.html#cb39-3"></a><span class="st">  </span><span class="kw">index_by</span>(<span class="dt">Year =</span> <span class="kw">year</span>(Month)) <span class="op">%&gt;%</span></span>
<span id="cb39-4"><a href="time-series-decomposition.html#cb39-4"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Turnover =</span> <span class="kw">sum</span>(Turnover))</span>
<span id="cb39-5"><a href="time-series-decomposition.html#cb39-5"></a></span>
<span id="cb39-6"><a href="time-series-decomposition.html#cb39-6"></a>aus_economy &lt;-<span class="st"> </span>global_economy <span class="op">%&gt;%</span></span>
<span id="cb39-7"><a href="time-series-decomposition.html#cb39-7"></a><span class="st">  </span><span class="kw">filter</span>(Code <span class="op">==</span><span class="st"> &quot;AUS&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="time-series-decomposition.html#cb40-1"></a>print_retail <span class="op">%&gt;%</span></span>
<span id="cb40-2"><a href="time-series-decomposition.html#cb40-2"></a><span class="st">  </span><span class="kw">left_join</span>(aus_economy, <span class="dt">by =</span> <span class="st">&quot;Year&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb40-3"><a href="time-series-decomposition.html#cb40-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Turnover_adj =</span> Turnover <span class="op">/</span><span class="st"> </span>CPI) <span class="op">%&gt;%</span></span>
<span id="cb40-4"><a href="time-series-decomposition.html#cb40-4"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(Turnover, Turnover_adj), </span>
<span id="cb40-5"><a href="time-series-decomposition.html#cb40-5"></a>               <span class="dt">names_to =</span> <span class="st">&quot;type&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Turnover&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb40-6"><a href="time-series-decomposition.html#cb40-6"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb40-7"><a href="time-series-decomposition.html#cb40-7"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(Year, Turnover)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb40-8"><a href="time-series-decomposition.html#cb40-8"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>type, <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="box-cox" class="section level3">
<h3><span class="header-section-number">3.1.4</span> Mathematical transformation (Box-Cox)</h3>
<p>If the data shows variation that increases or decreases with the level of the series, then a transformation can be useful.</p>
<p>A useful family of transformations, that includes both logarithms and power transformations, is the family of Box-Cox transformations, which depend on the parameter <span class="math inline">\(\lambda\)</span> and are defined as follows:</p>
<p><span class="math display" id="eq:box-cox">\[\begin{equation}
\tag{3.1}
w_t =
\begin{cases}
\log{y_t}&amp; \text{if} \; \lambda = 0 \\
(y^\lambda_t - 1)/\lambda &amp; \text{otherwise}
\end{cases}
\end{equation}\]</span></p>
<p>The logarithm in a Box-Cox transformation is always a natural logarithm (i.e., to base <span class="math inline">\(e\)</span>). So if <span class="math inline">\(λ = 0\)</span>, natural logarithms are used, but if <span class="math inline">\(\lambda \not= 0\)</span>, a power transformation is used, followed by some simple scaling.</p>
<p>If <span class="math inline">\(\lambda = 1\)</span>, then <span class="math inline">\(w_t = y_t−1\)</span>, so the transformed data is shifted downwards but there is no change in the shape of the time series. But for all other values of <span class="math inline">\(\lambda\)</span>, the time series will change shape.</p>
<p>A good value of is one which makes the size of the seasonal variation about the same across the whole series, as that makes the forecasting model simpler. The <code>guerrero</code> feature can be used to choose (estimate) a value of lambda for you. In the following case it chooses <span class="math inline">\(\lambda = 0.12\)</span>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="time-series-decomposition.html#cb41-1"></a>lambda &lt;-<span class="st"> </span>aus_production <span class="op">%&gt;%</span></span>
<span id="cb41-2"><a href="time-series-decomposition.html#cb41-2"></a><span class="st">  </span><span class="kw">features</span>(Gas, guerrero) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb41-3"><a href="time-series-decomposition.html#cb41-3"></a><span class="st">  </span><span class="kw">pull</span>(<span class="dv">1</span>)</span>
<span id="cb41-4"><a href="time-series-decomposition.html#cb41-4"></a></span>
<span id="cb41-5"><a href="time-series-decomposition.html#cb41-5"></a>lambda</span>
<span id="cb41-6"><a href="time-series-decomposition.html#cb41-6"></a><span class="co">#&gt; [1] 0.1204864</span></span>
<span id="cb41-7"><a href="time-series-decomposition.html#cb41-7"></a></span>
<span id="cb41-8"><a href="time-series-decomposition.html#cb41-8"></a>aus_production <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb41-9"><a href="time-series-decomposition.html#cb41-9"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Gas_transformed =</span> <span class="kw">box_cox</span>(Gas, lambda)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb41-10"><a href="time-series-decomposition.html#cb41-10"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(Gas, Gas_transformed), <span class="dt">names_to =</span> <span class="st">&quot;type&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb41-11"><a href="time-series-decomposition.html#cb41-11"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb41-12"><a href="time-series-decomposition.html#cb41-12"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(Quarter, value)) <span class="op">+</span></span>
<span id="cb41-13"><a href="time-series-decomposition.html#cb41-13"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>type, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-5-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="moving-averages" class="section level2">
<h2><span class="header-section-number">3.2</span> Moving averages</h2>
<p>A moving average of order <span class="math inline">\(m\)</span> can be written as:</p>
<p><span class="math display">\[
\bar{T}_t = \frac{1}{m}\sum_{j = -k}^{k}{y_{t+j}}
\]</span>
where <span class="math inline">\(m = 2k + 1\)</span></p>
<p>For example, a moving average of order 5 will select a data point, takes 2 points before it and 2 points after it and compute the average of these 5 points.</p>
<p>In practice, for top or bottom observations where are no value in either the first or last <span class="math inline">\((m - 1) / 2\)</span> position, the original value will be used to avoid <code>NULL</code> for border observations. To suppress this behaviour, use <code>.complete = TRUE</code> in <code>slide_</code> functions.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="time-series-decomposition.html#cb42-1"></a><span class="kw">library</span>(slider)</span>
<span id="cb42-2"><a href="time-series-decomposition.html#cb42-2"></a><span class="kw">slide</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="op">~</span><span class="st"> </span><span class="kw">mean</span>(.x), <span class="dt">.before =</span> <span class="dv">2</span>, <span class="dt">.after =</span> <span class="dv">2</span>)</span>
<span id="cb42-3"><a href="time-series-decomposition.html#cb42-3"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb42-4"><a href="time-series-decomposition.html#cb42-4"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb42-5"><a href="time-series-decomposition.html#cb42-5"></a><span class="co">#&gt; </span></span>
<span id="cb42-6"><a href="time-series-decomposition.html#cb42-6"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb42-7"><a href="time-series-decomposition.html#cb42-7"></a><span class="co">#&gt; [1] 2.5</span></span>
<span id="cb42-8"><a href="time-series-decomposition.html#cb42-8"></a><span class="co">#&gt; </span></span>
<span id="cb42-9"><a href="time-series-decomposition.html#cb42-9"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb42-10"><a href="time-series-decomposition.html#cb42-10"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb42-11"><a href="time-series-decomposition.html#cb42-11"></a><span class="co">#&gt; </span></span>
<span id="cb42-12"><a href="time-series-decomposition.html#cb42-12"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb42-13"><a href="time-series-decomposition.html#cb42-13"></a><span class="co">#&gt; [1] 3.5</span></span>
<span id="cb42-14"><a href="time-series-decomposition.html#cb42-14"></a><span class="co">#&gt; </span></span>
<span id="cb42-15"><a href="time-series-decomposition.html#cb42-15"></a><span class="co">#&gt; [[5]]</span></span>
<span id="cb42-16"><a href="time-series-decomposition.html#cb42-16"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb42-17"><a href="time-series-decomposition.html#cb42-17"></a><span class="kw">slide</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="op">~</span><span class="st"> </span><span class="kw">mean</span>(.x), <span class="dt">.before =</span> <span class="dv">2</span>, <span class="dt">.after =</span> <span class="dv">2</span>, <span class="dt">.complete =</span> <span class="ot">TRUE</span>)</span>
<span id="cb42-18"><a href="time-series-decomposition.html#cb42-18"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb42-19"><a href="time-series-decomposition.html#cb42-19"></a><span class="co">#&gt; NULL</span></span>
<span id="cb42-20"><a href="time-series-decomposition.html#cb42-20"></a><span class="co">#&gt; </span></span>
<span id="cb42-21"><a href="time-series-decomposition.html#cb42-21"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb42-22"><a href="time-series-decomposition.html#cb42-22"></a><span class="co">#&gt; NULL</span></span>
<span id="cb42-23"><a href="time-series-decomposition.html#cb42-23"></a><span class="co">#&gt; </span></span>
<span id="cb42-24"><a href="time-series-decomposition.html#cb42-24"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb42-25"><a href="time-series-decomposition.html#cb42-25"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb42-26"><a href="time-series-decomposition.html#cb42-26"></a><span class="co">#&gt; </span></span>
<span id="cb42-27"><a href="time-series-decomposition.html#cb42-27"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb42-28"><a href="time-series-decomposition.html#cb42-28"></a><span class="co">#&gt; NULL</span></span>
<span id="cb42-29"><a href="time-series-decomposition.html#cb42-29"></a><span class="co">#&gt; </span></span>
<span id="cb42-30"><a href="time-series-decomposition.html#cb42-30"></a><span class="co">#&gt; [[5]]</span></span>
<span id="cb42-31"><a href="time-series-decomposition.html#cb42-31"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>In the book <code>slide_</code> functions from <code>tsibble</code> packaege are used to do sliding window calculation, which will be superseded by the <code>slider</code> package in the future. For this reason I will try to make some replacements whenever there is a need for sliding window functions</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="time-series-decomposition.html#cb43-1"></a><span class="kw">library</span>(slider)</span>
<span id="cb43-2"><a href="time-series-decomposition.html#cb43-2"></a>aus_exports &lt;-<span class="st"> </span>global_economy <span class="op">%&gt;%</span></span>
<span id="cb43-3"><a href="time-series-decomposition.html#cb43-3"></a><span class="st">  </span><span class="kw">filter</span>(Country <span class="op">==</span><span class="st"> &quot;Australia&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb43-4"><a href="time-series-decomposition.html#cb43-4"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb43-5"><a href="time-series-decomposition.html#cb43-5"></a>    <span class="st">`</span><span class="dt">5-MA</span><span class="st">`</span> =<span class="st"> </span><span class="kw">slide_dbl</span>(Exports, <span class="op">~</span><span class="st"> </span><span class="kw">mean</span>(.x), <span class="dt">.before =</span> <span class="dv">2</span>, <span class="dt">.after =</span> <span class="dv">2</span>)</span>
<span id="cb43-6"><a href="time-series-decomposition.html#cb43-6"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb43-7"><a href="time-series-decomposition.html#cb43-7"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(Exports, <span class="st">`</span><span class="dt">5-MA</span><span class="st">`</span>), <span class="dt">names_to =</span> <span class="st">&quot;type&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Export&quot;</span>)</span>
<span id="cb43-8"><a href="time-series-decomposition.html#cb43-8"></a></span>
<span id="cb43-9"><a href="time-series-decomposition.html#cb43-9"></a>aus_exports <span class="op">%&gt;%</span></span>
<span id="cb43-10"><a href="time-series-decomposition.html#cb43-10"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Year, Export, <span class="dt">color =</span> type)) <span class="op">+</span></span>
<span id="cb43-11"><a href="time-series-decomposition.html#cb43-11"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb43-12"><a href="time-series-decomposition.html#cb43-12"></a><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;black&quot;</span>))</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Notice that the trend-cycle (in <span style="color: red;">red</span>) is smoother than the original data and captures the main movement of the time series without all of the minor fluctuations. The order of the moving average determines the smoothness of the trend-cycle estimate. In general, a larger order means a smoother curve. Figure below shows the effect of changing the order of the moving average for the Australian exports data.</p>
<p><img src="images/ma.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Simple moving averages such as these are usually of an odd order (e.g., <span class="math inline">\(3\)</span>, <span class="math inline">\(5\)</span>, <span class="math inline">\(7\)</span>, etc.). This is so they are symmetric: in a moving average of order <span class="math inline">\(m = 2k + 1\)</span>, the middle observation, and <span class="math inline">\(k\)</span> observations on either side, are averaged. But if m was even, it would no longer be symmetric.</p>
<div id="moving-averages-of-moving-averages" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Moving averages of moving averages</h3>
<p>When <span class="math inline">\(m\)</span> is even, we could still compute a <span class="math inline">\(m-MA\)</span> though losing symmetry. A <span class="math inline">\(4-MA\)</span> can be defined as :</p>
<p><span class="math display">\[
\hat{T}_t = \frac{1}{4}(y_{t-1} + y_t + y_{t+1} + y_{t+2})
\]</span></p>
<p><strong>It is possible to apply a moving average to a moving average. One reason for doing this is to make an even-order moving average symmetric.</strong></p>
<p>For example, we might take a moving average of order <span class="math inline">\(4\)</span>, and then apply another moving average of order <span class="math inline">\(2\)</span> to the results. And the final result, <span class="math inline">\(2\times 4 -MA\)</span> can be written as:</p>
<p><span class="math display">\[
\begin{align}
\hat{T}_t &amp;= \frac{1}{2}[
                        \frac{1}{4}(
                          y_{t-2} + 
                          y_{t-1} + 
                          y_t + 
                          y_{t+1}) + 
                        \frac{1}{4}(y_{t-1} + 
                          y_{t} + 
                          y_{t + 1} + 
                          y_{t+2})] \\
          &amp;= \frac{1}{8}y_{t-2} + 
             \frac{1}{4}y_{t-1} +  
             \frac{1}{4}y_{t} + 
             \frac{1}{4}y_{t+1} + 
             \frac{1}{8}y_{t+2}
\end{align}
\]</span></p>
<p>Now we can see that <span class="math inline">\(2\times 4 -MA\)</span> is an <strong>weighted average</strong> of 5 values centered on <span class="math inline">\(y_t\)</span>, and is symmetric.</p>
<p>Other combinations of moving averages are also possible. For example, a <span class="math inline">\(3 \times 3-MA\)</span> is often used, and consists of a moving average of order <span class="math inline">\(3\)</span> followed by another moving average of order <span class="math inline">\(3\)</span>. <strong>In general, an even order MA should be followed by an even order MA to make it symmetric.</strong> Similarly, an odd order MA should be followed by an odd order <span class="math inline">\(MA\)</span>.</p>
<p>In general, a <span class="math inline">\(2×m-MA\)</span> is equivalent to a weighted moving average of order <span class="math inline">\(m+1\)</span> where all observations take the weight <span class="math inline">\(1/m\)</span>, except for the first and last terms which take weights <span class="math inline">\(1/(2m)\)</span></p>
</div>
<div id="estimating-the-trend-cycle-component-with-seasonal-data" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Estimating the trend-cycle component with seasonal data</h3>
<p>The most common use of centred moving averages is for estimating the trend-cycle from seasonal data. Consider the <span class="math inline">\(2\times 4- MA\)</span>:<br />
<span class="math display">\[
\hat{T}_t = \frac{1}{8}y_{t-2} + 
            \frac{1}{4}y_{t-1} +  
            \frac{1}{4}y_{t} + 
            \frac{1}{4}y_{t+1} + 
            \frac{1}{8}y_{t+2}
\]</span>
When applied to quarterly data, each quarter of the year is given equal weight as the first and last terms apply to the same quarter in consecutive years. Consequently, the seasonal variation will be averaged out and the resulting values of <span class="math inline">\(\hat{T}_t\)</span> will have little or no seasonal variation remaining. A similar effect would be obtained using a <span class="math inline">\(2×8-MA\)</span> or a <span class="math inline">\(2×12-MA\)</span> to quarterly data.</p>
<p>As is noted above, a <span class="math inline">\(2×m-MA\)</span> is equivalent to a weighted <span class="math inline">\(m + 1 -MA\)</span>, which handles a <span class="math inline">\(m\)</span> seasonal period when <span class="math inline">\(m\)</span> is even. <strong>So, if the seasonal period is even and of order <span class="math inline">\(m\)</span>, we use a <span class="math inline">\(2×m-MA\)</span> to estimate the trend-cycle. If the seasonal period is odd and of order <span class="math inline">\(m\)</span>, we use a <span class="math inline">\(m-MA\)</span> to estimate the trend-cycle.</strong></p>
<p>In <code>aus_livestock</code> data we can see some sort of seasonality:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="time-series-decomposition.html#cb44-1"></a>aus_livestock <span class="op">%&gt;%</span></span>
<span id="cb44-2"><a href="time-series-decomposition.html#cb44-2"></a><span class="st">  </span><span class="kw">filter</span>(Animal <span class="op">==</span><span class="st"> &quot;Pigs&quot;</span>, State <span class="op">==</span><span class="st"> &quot;Australian Capital Territory&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb44-3"><a href="time-series-decomposition.html#cb44-3"></a><span class="st">  </span><span class="kw">gg_season</span>()</span></code></pre></div>
<p><img src="images/livestock.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Since it is collected monthly, we can use a <span class="math inline">\(2\times12-MA\)</span> to average out the seasonality:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="time-series-decomposition.html#cb45-1"></a>capital_livestock_ma &lt;-<span class="st"> </span>aus_livestock <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb45-2"><a href="time-series-decomposition.html#cb45-2"></a><span class="st">  </span><span class="kw">filter</span>(Animal <span class="op">==</span><span class="st"> &quot;Pigs&quot;</span>, State <span class="op">==</span><span class="st"> &quot;Australian Capital Territory&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb45-3"><a href="time-series-decomposition.html#cb45-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">2-MA</span><span class="st">`</span> =<span class="st"> </span><span class="kw">slide_dbl</span>(Count, <span class="op">~</span><span class="st"> </span><span class="kw">mean</span>(.x), <span class="dt">.before =</span> <span class="dv">1</span>),</span>
<span id="cb45-4"><a href="time-series-decomposition.html#cb45-4"></a>         <span class="st">`</span><span class="dt">12x2-MA</span><span class="st">`</span> =<span class="st"> </span><span class="kw">slide_dbl</span>(<span class="st">`</span><span class="dt">2-MA</span><span class="st">`</span>, <span class="op">~</span><span class="st"> </span><span class="kw">mean</span>(.x), <span class="dt">.before =</span> <span class="dv">5</span>, <span class="dt">.after =</span> <span class="dv">6</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb45-5"><a href="time-series-decomposition.html#cb45-5"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="st">`</span><span class="dt">2-MA</span><span class="st">`</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb45-6"><a href="time-series-decomposition.html#cb45-6"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">names_to =</span> <span class="st">&quot;type&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb45-7"><a href="time-series-decomposition.html#cb45-7"></a></span>
<span id="cb45-8"><a href="time-series-decomposition.html#cb45-8"></a>capital_livestock_ma <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb45-9"><a href="time-series-decomposition.html#cb45-9"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Month, count, <span class="dt">color =</span> type)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb45-10"><a href="time-series-decomposition.html#cb45-10"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb45-11"><a href="time-series-decomposition.html#cb45-11"></a><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;gray&quot;</span>))</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="weighted-moving-averages" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Weighted moving averages</h3>
<p>Combinations of moving averages result in weighted moving averages. For example, the <span class="math inline">\(2\times4-MA\)</span> discussed above is equivalent to a weighted <span class="math inline">\(5-MA\)</span> with weights given by <span class="math inline">\([\frac{1}{8},\frac{1}{4},\frac{1}{4},\frac{1}{4},\frac{1}{8}]\)</span>. In general, a weighted <span class="math inline">\(m-MA\)</span> can be written as</p>
<p><span class="math display">\[
\hat{T}_t = \sum_{j = -k}^{k}{a_jy_{t+j}}
\]</span></p>
<p>where <span class="math inline">\(m = 2k + 1\)</span>. It is important that the weights all sum to one and that they are symmetric so that <span class="math inline">\(a_j=a_{−j}\)</span>. The simple <span class="math inline">\(m-MA\)</span> is a special case where all of the weights are equal to <span class="math inline">\(1/m\)</span>.</p>
<p>A major advantage of weighted moving averages is that they yield a smoother estimate of the trend-cycle. Instead of observations entering and leaving the calculation at full weight, their weights slowly increase and then slowly decrease, resulting in a smoother curve.</p>
</div>
</div>
<div id="classical-decomposition" class="section level2">
<h2><span class="header-section-number">3.3</span> Classical decomposition</h2>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="time-series-decomposition.html#cb46-1"></a>us_retail_employment &lt;-<span class="st"> </span>fpp3<span class="op">::</span>us_employment <span class="op">%&gt;%</span></span>
<span id="cb46-2"><a href="time-series-decomposition.html#cb46-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">year</span>(Month) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1990</span>, Title <span class="op">==</span><span class="st"> &quot;Retail Trade&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb46-3"><a href="time-series-decomposition.html#cb46-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>Series_ID)</span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="time-series-decomposition.html#cb47-1"></a>classical_dcmp &lt;-<span class="st"> </span>us_retail_employment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb47-2"><a href="time-series-decomposition.html#cb47-2"></a><span class="st">  </span><span class="kw">model</span>(<span class="dt">classical =</span> feasts<span class="op">:::</span><span class="kw">classical_decomposition</span>(Employed, <span class="dt">type =</span> <span class="st">&quot;additive&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb47-3"><a href="time-series-decomposition.html#cb47-3"></a><span class="st">  </span><span class="kw">components</span>()</span>
<span id="cb47-4"><a href="time-series-decomposition.html#cb47-4"></a></span>
<span id="cb47-5"><a href="time-series-decomposition.html#cb47-5"></a>classical_dcmp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">autoplot</span>()</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="x11-decomposition" class="section level2">
<h2><span class="header-section-number">3.4</span> X11 decomposition</h2>
<p><code>feasts:::X11(Employed, type = "additive")</code> makes specifications about a X11 additive model, and <code>model()</code> were called to estimate it, and <code>components()</code> gives <span class="math inline">\(\hat{T}_t\)</span>, <span class="math inline">\(\hat{S}_t\)</span> and <span class="math inline">\(\hat{R}_t\)</span> for each observation. <strong>This is only applicable to monthly or quarterly data</strong>.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="time-series-decomposition.html#cb48-1"></a>x11_dcmp &lt;-<span class="st"> </span>us_retail_employment <span class="op">%&gt;%</span></span>
<span id="cb48-2"><a href="time-series-decomposition.html#cb48-2"></a><span class="st">  </span><span class="kw">model</span>(<span class="dt">x11 =</span> feasts<span class="op">:::</span><span class="kw">X11</span>(Employed, <span class="dt">type =</span> <span class="st">&quot;additive&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb48-3"><a href="time-series-decomposition.html#cb48-3"></a><span class="st">  </span><span class="kw">components</span>()</span>
<span id="cb48-4"><a href="time-series-decomposition.html#cb48-4"></a></span>
<span id="cb48-5"><a href="time-series-decomposition.html#cb48-5"></a>x11_dcmp</span>
<span id="cb48-6"><a href="time-series-decomposition.html#cb48-6"></a><span class="co">#&gt; # A dable:           357 x 7 [1M]</span></span>
<span id="cb48-7"><a href="time-series-decomposition.html#cb48-7"></a><span class="co">#&gt; # Key:               .model [1]</span></span>
<span id="cb48-8"><a href="time-series-decomposition.html#cb48-8"></a><span class="co">#&gt; # X11 Decomposition: Employed = trend + seasonal + irregular</span></span>
<span id="cb48-9"><a href="time-series-decomposition.html#cb48-9"></a><span class="co">#&gt;   .model    Month Employed  trend seasonal irregular season_adjust</span></span>
<span id="cb48-10"><a href="time-series-decomposition.html#cb48-10"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;mth&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb48-11"><a href="time-series-decomposition.html#cb48-11"></a><span class="co">#&gt; 1 x11    1990 Jan   13256. 13260.    -20.5    16.0          13276.</span></span>
<span id="cb48-12"><a href="time-series-decomposition.html#cb48-12"></a><span class="co">#&gt; 2 x11    1990 Feb   12966. 13248.   -253.    -29.1          13219.</span></span>
<span id="cb48-13"><a href="time-series-decomposition.html#cb48-13"></a><span class="co">#&gt; 3 x11    1990 Mar   12938. 13237.   -291.     -7.47         13229.</span></span>
<span id="cb48-14"><a href="time-series-decomposition.html#cb48-14"></a><span class="co">#&gt; 4 x11    1990 Apr   13012. 13227.   -217.      2.31         13229.</span></span>
<span id="cb48-15"><a href="time-series-decomposition.html#cb48-15"></a><span class="co">#&gt; 5 x11    1990 May   13108. 13217.   -111.      2.40         13219.</span></span>
<span id="cb48-16"><a href="time-series-decomposition.html#cb48-16"></a><span class="co">#&gt; 6 x11    1990 Jun   13183. 13204.    -21.0    -0.192        13204.</span></span>
<span id="cb48-17"><a href="time-series-decomposition.html#cb48-17"></a><span class="co">#&gt; # ... with 351 more rows</span></span></code></pre></div>
<p>Note that observations at top (and bottom) now have valid <code>trend</code> estimate and therefore <code>seasonal</code>, <code>irregular</code> and <code>seasonal_adjust</code> are no longer <code>NA</code>.</p>
<p>Next plot shows the trend-cycle component and the seasonally adjusted data, along with the original data.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="time-series-decomposition.html#cb49-1"></a>x11_dcmp <span class="op">%&gt;%</span></span>
<span id="cb49-2"><a href="time-series-decomposition.html#cb49-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Month)) <span class="op">+</span></span>
<span id="cb49-3"><a href="time-series-decomposition.html#cb49-3"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> Employed, <span class="dt">colour =</span> <span class="st">&quot;Data&quot;</span>)) <span class="op">+</span></span>
<span id="cb49-4"><a href="time-series-decomposition.html#cb49-4"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> season_adjust, <span class="dt">colour =</span> <span class="st">&quot;Seasonally Adjusted&quot;</span>)) <span class="op">+</span></span>
<span id="cb49-5"><a href="time-series-decomposition.html#cb49-5"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> trend, <span class="dt">colour =</span> <span class="st">&quot;Trend&quot;</span>)) <span class="op">+</span></span>
<span id="cb49-6"><a href="time-series-decomposition.html#cb49-6"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Persons (thousands)&quot;</span>) <span class="op">+</span></span>
<span id="cb49-7"><a href="time-series-decomposition.html#cb49-7"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Total employment in US retail&quot;</span>) <span class="op">+</span></span>
<span id="cb49-8"><a href="time-series-decomposition.html#cb49-8"></a><span class="st">  </span><span class="kw">scale_colour_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;gray&quot;</span>,<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;red&quot;</span>),</span>
<span id="cb49-9"><a href="time-series-decomposition.html#cb49-9"></a>             <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="st">&quot;Data&quot;</span>,<span class="st">&quot;Seasonally Adjusted&quot;</span>,<span class="st">&quot;Trend&quot;</span>))</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-14-1.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="time-series-decomposition.html#cb50-1"></a>x11_dcmp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">autoplot</span>()</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>It can be useful to use seasonal plots and seasonal sub-series plots of the seasonal component. These help us to visualise the variation in the seasonal component over time. In this case, there are only small changes over time.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="time-series-decomposition.html#cb51-1"></a>x11_dcmp <span class="op">%&gt;%</span></span>
<span id="cb51-2"><a href="time-series-decomposition.html#cb51-2"></a><span class="st">  </span><span class="kw">gg_subseries</span>(seasonal)</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>To campare these x11 and classical model, we can specify multiple models in <code>models</code>, this plot shows that the estimated seasonal effect of x11 model have deviated a bit in the recent decade and that the classical model are truncated on both sides, though this two models may not practically have a meaningful difference in this case.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="time-series-decomposition.html#cb52-1"></a>us_retail_employment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb52-2"><a href="time-series-decomposition.html#cb52-2"></a><span class="st">    </span><span class="kw">model</span>(<span class="dt">classical =</span> feasts<span class="op">:::</span><span class="kw">classical_decomposition</span>(Employed, <span class="dt">type =</span> <span class="st">&quot;additive&quot;</span>),</span>
<span id="cb52-3"><a href="time-series-decomposition.html#cb52-3"></a>          <span class="dt">x11 =</span> feasts<span class="op">:::</span><span class="kw">X11</span>(Employed, <span class="dt">type =</span> <span class="st">&quot;additive&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb52-4"><a href="time-series-decomposition.html#cb52-4"></a><span class="st">    </span><span class="kw">components</span>() <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb52-5"><a href="time-series-decomposition.html#cb52-5"></a><span class="st">    </span><span class="kw">autoplot</span>()</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-17-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="seats-decomposition" class="section level2">
<h2><span class="header-section-number">3.5</span> SEATS decomposition</h2>
<p>The procedure works only with quarterly and monthly data. So seasonality of other kinds, such as daily data, or hourly data, or weekly data, require an alternative approach.</p>
<p>Only monthly and quarterly.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="time-series-decomposition.html#cb53-1"></a>seats_dcmp &lt;-<span class="st"> </span>us_retail_employment <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb53-2"><a href="time-series-decomposition.html#cb53-2"></a><span class="st">  </span><span class="kw">model</span>(<span class="dt">seats =</span> feasts<span class="op">:::</span><span class="kw">SEATS</span>(Employed)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb53-3"><a href="time-series-decomposition.html#cb53-3"></a><span class="st">  </span><span class="kw">components</span>()</span>
<span id="cb53-4"><a href="time-series-decomposition.html#cb53-4"></a></span>
<span id="cb53-5"><a href="time-series-decomposition.html#cb53-5"></a>seats_dcmp <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb53-6"><a href="time-series-decomposition.html#cb53-6"></a><span class="st">  </span><span class="kw">autoplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb53-7"><a href="time-series-decomposition.html#cb53-7"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;SEATS decomposition of total US retail employment&quot;</span>)</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="stl-decomposition" class="section level2">
<h2><span class="header-section-number">3.6</span> STL decomposition</h2>
<p>STL is a versatile and robust method for decomposing time series. STL is an acronym for “Seasonal and Trend decomposition using Loess”, while Loess is a method for estimating nonlinear relationships.</p>
<p>STL has several advantages over the classical, SEATS and X11 decomposition methods:</p>
<ul>
<li>Unlike SEATS and X11, STL will handle any type of seasonality, not only monthly and quarterly data.<br />
</li>
<li>The seasonal component is allowed to change over time, and the rate of change can be controlled by the user.<br />
</li>
<li>The smoothness of the trend-cycle can also be controlled by the user.<br />
</li>
<li>It can be robust to outliers (i.e., the user can specify a robust decomposition), so that occasional unusual observations will not affect the estimates of the trend-cycle and seasonal components. They will, however, affect the remainder component.</li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="time-series-decomposition.html#cb54-1"></a>us_retail_employment <span class="op">%&gt;%</span></span>
<span id="cb54-2"><a href="time-series-decomposition.html#cb54-2"></a><span class="st">  </span><span class="kw">model</span>(<span class="kw">STL</span>(</span>
<span id="cb54-3"><a href="time-series-decomposition.html#cb54-3"></a>    Employed <span class="op">~</span><span class="st"> </span><span class="kw">trend</span>(<span class="dt">window =</span> <span class="dv">7</span>) <span class="op">+</span><span class="st"> </span><span class="kw">season</span>(<span class="dt">window =</span> <span class="ot">Inf</span>), <span class="dt">robust =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb54-4"><a href="time-series-decomposition.html#cb54-4"></a><span class="st">  </span><span class="kw">components</span>() <span class="op">%&gt;%</span></span>
<span id="cb54-5"><a href="time-series-decomposition.html#cb54-5"></a><span class="st">  </span><span class="kw">autoplot</span>()</span></code></pre></div>
<p><img src="ch3_files/figure-html/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="time-series-graphics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="time-series-features.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/enixam/fpp/edit/master/ch3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
